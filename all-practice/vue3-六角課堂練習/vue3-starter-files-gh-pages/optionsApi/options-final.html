<!DOCTYPE html>
<html>

<head>
  <title>ç« ç¯€æŒ‘æˆ°</title>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1"
  >
  <link
    href="images/favicon.ico"
    rel="shortcut icon"
  >
  <meta charset="UTF-8">
  <script src="/javascripts/vendor.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.2/vue.global.js"></script>
</head>

<body class="bg-lighter">
  <div class="container main my-5">
    <div class="row">
      <main class="col post">
        <!-- ç« ç¯€æ¨™é¡Œ -->
        <div class="mb-4">
          <h1 class="mt-0 text-muted">ç« ç¯€æŒ‘æˆ°</h1><small>æª”åï¼š<code>options-final.html</code></small>
        </div>
        <!-- ğŸ”¥ğŸ”¥ç·´ç¿’é–‹å§‹ğŸ”¥ğŸ”¥ -->
        <!-- 
        1.ä½¿ç”¨ç”Ÿå‘½é€±æœŸå–å¾—é ç«¯è³‡æ–™ -> 
          åœ¨ methods ä¸­ç”¨ get axios å–å¾—é ç«¯è³‡æ–™ï¼Œå†è®“ ç”Ÿå‘½é€±æœŸ created éšæ®µ åŸ·è¡Œ methods (è¼‰å…¥ç•«é¢æ™‚å°±å¯ä»¥æ‹¿åˆ°é ç«¯è³‡æ–™)
          data ä¸­ datastore æ”¾å…¥ é ç«¯å–å¾—çš„è³‡æ–™
          å–å¾—é ç«¯è³‡æ–™ä¸­çš„ name å‘ˆç¾åœ¨å·¦å´ç•«é¢

        2.é»æ“Šå·¦å´æ™¯é»æ™‚,å‘ˆç¾å³é‚Šçš„å€å¡Š ->
          å·¦é‚Šå€å¡Šçš„ label æ”¾å…¥ v-for in datastore (datastore è£¡é¢å­˜æ”¾é ç«¯è³‡æ–™ï¼Œåœ¨ç”¨æ¨¡æ¿å‘ˆç¾ item.name)
        
        3.æ­é… Google Map çš„ iframe ç›´æ¥å‘ˆç¾ä½ç½®

        4.ä½¿ç”¨ computed çš„æŠ€å·§,è£½ä½œéæ¿¾åŠŸèƒ½
          computed ä¸­ å»ºç«‹ filterSearch (ç•¶æœå°‹æ¡†è¼¸å…¥é—œéµå­—ç¬¦åˆè³‡æ–™çš„åå­—ï¼Œå°±æœƒç¯©é¸å‡ºä¾†)
          è®“å·¦é‚Šå€å¡Šç¶å®š filterSearchï¼Œç•¶æœå°‹æ¡† filterSearch = "" æ²’æœå°‹æ™‚ï¼Œèˆ‡ datastore ä¹Ÿç®—ç¬¦åˆ
          æœƒå‘ˆç¾æ‰€æœ‰è³‡æ–™

        5.ä½¿ç”¨ watch,è£½ä½œç€è¦½ç´€éŒ„(ä¸éåç­†) 

        å•é¡Œ:
        ç‚ºä½• filterSearch ä¸€é–‹å§‹ç‚º "" ï¼Œç­‰æ–¼æ²’æœ‰æœå°‹æ™‚ï¼Œç‚ºä½•å¯ä»¥ç¬¦åˆ é ç«¯è³‡æ–™åå­—ï¼Œå¯ä»¥é»˜èªå…¨éƒ¨è³‡æ–™å‡ºä¾† 

    
        -->

        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
        <div
          id="app"
          class="mt-2"
        >
          <div class="row h-100">
            <div class="col-md-3 h-100 d-flex flex-column">
              <div class="form-floating mb-2">
                <!-- æœå°‹æ¡†ï¼Œç•¶æœå°‹é—œéµå­—æœ‰ç¬¦åˆ è§€å…‰æ™¯é»çš„ åå­—æ™‚ï¼Œå°±æœƒå‡ºç¾å·¦å´ä¸‹æ–¹ -->
                <!-- v-model="cacheSearch" æŠŠ åœ¨æœå°‹æ¡†è¼¸å…¥çš„å…§å®¹ é€£å‹•åˆ° æš«å­˜ data ä¸­ -->
                <input
                  type="text"
                  class="form-control"
                  id="search"
                  placeholder="search"
                  v-model="cacheSearch"
                >
                <label for="search">search</label>
              </div>
              <!-- å·¦å´ æ¯å€‹è§€å…‰æ™¯é»åœ°å€é¸æ“‡ å€å¡Š -->
              <!--  v-for="(item,key) in filterSearch"ï¼Œé€£å‹•åˆ° filterSearch è€Œä¸æ˜¯æœ¬ä¾†çš„ datastore 
                    æ˜¯å› ç‚º ç•¶éƒ½ä¸è¼¸å…¥æ™‚ ç­‰æ–¼ ""ï¼Œ è³‡æ–™ä¸­å„å€‹åå­—æœ€å°çµ„æˆä¹Ÿéƒ½æ˜¯æœ‰ ""ï¼Œæ‰€ä»¥ä¹Ÿç®—ç¬¦åˆ
                    å°±èƒ½ç›´æ¥åœ¨ä¸è¼¸å…¥æ™‚ï¼Œé¡¯ç¾å…¨éƒ¨è³‡æ–™
              -->
              <div class="list-group option">
                <label
                  class="list-group-item"
                  v-for="(item,key) in filterSearch"
                  :key="keys + 'filter'"
                >
                  <!-- @click="cacheArea = item"
                    :value="item"
                    :checked="cacheArea.Name === item.Name"
                    ??????????????????????????????
                   -->
                  <input
                    class="form-check-input me-1"
                    type="radio"
                    name="area"
                    @click="cacheArea = item"
                    :value="item"
                    :checked="cacheArea.Name === item.Name"
                  >
                  {{ item.Name }}
                </label>
              </div>
            </div>
            <div class="col-md-8 h-100 d-flex flex-column">
              <div class="form-floating">
                <!-- v-model="cacheArea" ç›£è½ åªèƒ½æ”¾ 10 ç­†ï¼Œè¶…éæœƒ åˆªé™¤ ä¹‹å¾Œå‘ˆç¾æ›´æ–°è³‡æ–™ çš„å‹•ä½œ -->
                <select
                  v-model="cacheArea"
                  id="cacheArea"
                  class="form-select w-50 mb-2"
                  aria-label="select example"
                >
                  <option
                    selected
                    value=""
                    disabled
                  >ç€è¦½ç´€éŒ„
                  </option>
                  <!-- ç€è¦½ç´€éŒ„  -->
                  <!-- {{ keys + 1 }}.{{ item.Name }} å‘ˆç¾æœƒæ˜¯ 1. **å…¬åœ’ 2.**éŠæ¨‚å ´ -->
                  <option
                    v-for="(item, keys) in browseLog"
                    :value="item"
                  >{{ keys + 1 }}.{{ item.Name }}
                  </option>

                </select>
                <label for="cacheArea">ç€è¦½ç´€éŒ„</label>
              </div>

              <div class="card overflow-auto">
                <!--  -->
                <div v-if="cacheArea.Name">
                  <img
                    :src="cacheArea.Picture1"
                    class="card-img-top"
                    :alt="cacheArea.Name"
                  >
                  <iframe
                    width="100%"
                    height="300"
                    frameborder="0"
                    scrolling="no"
                    marginheight="0"
                    marginwidth="0"
                    :src=`https://maps.google.com.tw/maps?f=q&hl=zh-TW&geocode=&q=${datastore.Py},${datastore.Px}(${datastore.Name})&z=16&output=embed`
                  ></iframe>
                  <div class="card-body">
                    <h5 class="card-title">{{ datastore.Name }}</h5>
                    <p>{{ datastore.Description }}</p>
                  </div>
                </div>

                <div
                  v-else
                  class="card-body"
                >
                  è«‹é¸æ“‡å ´åŸŸ
                </div>
              </div>
            </div>
          </div>
        </div>

        <script>
          // const apiUrl = 'https://raw.githubusercontent.com/hexschool/KCGTravel/master/datastore_search.json';

          // axios.get(apiUrl).then((res) => {
          //   // å–å¾—é ç«¯è³‡æ–™
          // })

          const App = {
            // data
            data() {
              return {
                // é ç«¯è³‡æ–™ æš«å­˜å€
                datastore: [],

                // é»é¸å·¦é‚Šæ™¯é»å€å¡Šæ™‚ï¼Œè®€å–ä¸€ç­†ç”¨çš„ æš«å­˜å€
                cacheArea: '',

                // æœå°‹æ¡†å…§å®¹ æš«å­˜å€
                cacheSearch: '',

                // ç€è¦½ç´€éŒ„ åªèƒ½æ”¾ 10 ç­†è³‡æ–™çš„ æš«å­˜å€
                browseLog: [],
              };
            },

            // methods
            methods: {
              getData() {
                const apiUrl = 'https://raw.githubusercontent.com/hexschool/KCGTravel/master/datastore_search.json';
                axios.get(apiUrl).then((res) => {
                  // å–å¾—é ç«¯è³‡æ–™ï¼Œres.data (å–å¾— res åƒæ•¸ ä¸­çš„ data )
                  // åœ¨é ç«¯è³‡æ–™ç¶²å€ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ‰€éœ€è¦çš„é™£åˆ—è³‡æ–™åœ¨ result.records è£¡
                  this.datastore = res.data.result.records;
                })
              }
            },
            // watch
            watch: {
              // æ”¾ç€è¦½ç´€éŒ„ ç©ºé–“ åªèƒ½æ”¾ 10 ç­†è³‡æ–™ï¼Œè¶…éæœƒåˆªé™¤æœ€èˆŠçš„
              cacheArea() {
                if (this.browseLog.length < 10) {
                  this.browseLog.push(this.cacheArea);
                } else {
                  this.browseLog.shift();
                  this.browseLog.push(this.cacheArea);
                }
              },
            },
            // computed
            // æœå°‹æ¡† èˆ‡ é ç«¯è³‡æ–™ å°æ¯” -> ç¯©é¸ç¬¦åˆè³‡æ–™ -> ç¬¦åˆå¾Œå‘ˆç¾
            // datastore é ç«¯è£åˆ°å€‰åº«ä¸­çš„è³‡æ–™
            // cacheSearch æš«å­˜ æœå°‹æ¡†å…§çš„è³‡æ–™
            computed: {
              filterSearch() {
                return this.datastore.filter((item) => item.Name.match(this.cacheSearch));
              },
            },
            // ç”Ÿå‘½é€±æœŸéšæ®µ (? éšæ®µå®šç¾©)
            // åœ¨ created éšæ®µåŸ·è¡Œ æ”¾åœ¨ methods å…§çš„ get axios ï¼Œå–å¾—é ç«¯è³‡æ–™
            created() {
              this.getData();
            },
          };


          Vue.createApp(App).mount('#app');
        </script>

        <style>
          #app {
            height: 600px;
          }

          .option {
            overflow-y: auto;
          }
        </style>

        <!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
      </main>

      <aside class="col-md-3">
        <div
          class="sticky-top"
          style="top: 76px"
        >
          <div class="list-group">

            <a
              href="/optionsApi/options-api.html"
              class="list-group-item list-group-item-action
        
        "
            >
              option API
            </a>

            <a
              href="/optionsApi/options-methods.html"
              class="list-group-item list-group-item-action
        
        "
            >
              Methods
            </a>

            <a
              href="/optionsApi/options-computed.html"
              class="list-group-item list-group-item-action
        
        "
            >
              Computed
            </a>

            <a
              href="/optionsApi/options-watch.html"
              class="list-group-item list-group-item-action
        
        "
            >
              Watch
            </a>

            <a
              href="/optionsApi/options-life-cycle.html"
              class="list-group-item list-group-item-action
        
        "
            >
              å…ƒä»¶ç”Ÿå‘½é€±æœŸ
            </a>

            <a
              href="/optionsApi/options-final.html"
              class="list-group-item list-group-item-action
        
        active"
            >
              ç« ç¯€æŒ‘æˆ°
            </a>

          </div>
          <div class="mt-3 text-end p-2 bg-light rounded">
            <small class="text-black-50 fw-light mb-0">æ–‡ä»¶ç‰ˆæœ¬ï¼š2022/6/21</small>
          </div>
        </div>

      </aside>

    </div>
  </div>

  <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-secondary">
    <div class="container-fluid">
      <a
        class="navbar-brand"
        href="/"
      >Vue 3 ç·´ç¿’æ‰‹å†Š</a>
      <div
        class="collapse navbar-collapse"
        id="navbarCollapse"
      >
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a
              class="nav-link "
              href="/es6/shorthand.html"
            >JS å¿…å‚™è§€å¿µ</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link "
              href="/intro/createApp.html"
            >èªè­˜ Vue.js</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link "
              href="/template/v-text.html"
            >æ¨¡æ¿</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link active"
              href="/optionsApi/options-methods.html"
            >æ–¹æ³•</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link "
              href="/components/component_register.html"
            >å…ƒä»¶</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link "
              href="/advApi/adv-refs.html"
            >é€²éš</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link "
              href="/router/vue-router.html"
            >è·¯ç”±</a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link "
              href="/composition/proxy.html"
            >Composition API</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <footer class="footer py-2 bg-light">
    <div class="container text-center">
      <small class="text-black-50 fw-light mb-0">å…­è§’å­¸é™¢ Vue èª²ç¨‹å°ˆå±¬æ–‡ä»¶</small>
    </div>
  </footer>
  <link
    rel="stylesheet"
    href="/stylesheets/all.css"
  >
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
  >
</body>

</html>